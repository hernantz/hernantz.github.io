<!DOCTYPE html>
<html lang="en">
<head>
  <title>If you write ifs | README.txt</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
  <link rel="stylesheet" media="(max-width: 750px)" href="/theme/css/mobile.css" type="text/css" />
  <link rel="stylesheet" href="/theme/css/github.css" type="text/css" />
  <link href="/images/favicon.ico" rel="icon" type="image/x-icon" />
  <link href="/rss.xml" type="application/atom+xml" rel="alternate" title="README.txt RSS Feed" />
  <meta name="description" content="AKA else considered harmful.">
  <meta name="keywords" content="python, ideas">
  <meta name="author" content="hernantz">
</head>

<body>

  <aside class="sidebar">
    <a href="/"><img class="rounded-img" src="/images/avatar.png" height="75" width="75" /></a>

      <nav>
        <ul>
            <li><a href="http://twitter.com/hernantz">twitter</i></a></li>
            <li><a href="http://github.com/hernantz">github</i></a></li>
            <li><a href="http://last.fm/user/hernantz">last.fm</i></a></li>
            <li><a href="/talks.html">talks</a></li>
            <li><a href="/whoami.html">whoami</a></li>
            <li><a href="/">blog</a></li>
        </ul>
      </nav>

  </aside>
  <main>
        
<article class="column-right">
  <h1 class="main-title">If you write ifs</h1>
  <summary>
    <p class="light">
      Published
on <time datetime="2013-10-24T22:56:00-03:00">Thu 24 October 2013</time>,       under <a href="http://hernantz.github.io/category/programming.html">Programming</a>,
      tagged with <a href="http://hernantz.github.io/tag/python.html">python</a> and <a href="http://hernantz.github.io/tag/ideas.html">ideas</a>.
    </p>
  </summary>
  <p><img alt="Tree branches" src="/images/tree-branches.jpg" title="Tree branches" /></p>
<p>In Python we strongly emphasize that code must be elegant and easy to
interpret, but with PEP8 alone is not enough, many times our logic can be
nested in a cataract of if(s) and else(s) difficult to maintain. In this
talk we explored some strategies to avoid that unnecessary complexity.</p>
<p>I'm writing this article to encourage some code structure techniques and never
again have to discuss this in the future.</p>
<p>As a programmer, most of your time you will be writing ifs.
Not only becouse this is the main flow control structure, in c like languages,
but because writing an else is (or shoud be at least) a code smell. It's a trap.</p>
<p>https://news.ycombinator.com/item?id=16678209</p>
<h2 id="cut-the-flow-ifs">Cut the flow ifs<a class="headerlink" href="#cut-the-flow-ifs" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">continue</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">log</span><span class="p">(</span><span class="s1">&#39;None found&#39;</span><span class="p">)</span>
        <span class="k">break</span>
</pre></div>


<p>rather than</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">blah</span>
        <span class="n">blah</span> 
        <span class="n">blah</span>
        <span class="n">blah</span> 
        <span class="k">if</span> <span class="n">is_nested_if</span><span class="p">:</span>
            <span class="n">blah</span>
            <span class="n">blah</span> 
            <span class="k">try</span><span class="p">:</span>
                <span class="n">blah</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">blah</span> 
<span class="k">else</span><span class="p">:</span>
    <span class="n">log</span><span class="p">(</span><span class="s1">&#39;None found&#39;</span><span class="p">)</span>
</pre></div>


<p>If your programming language has curly braces, nesting ifs leads you to
the pyramid of doom.
Pyramid of doom picture here.
While in Python it looks more like a stairs of doom.
stair of doom in python picture
In functional languages, it pretty much always looks ugly.</p>
<h2 id="single-check-ifs">Single check ifs<a class="headerlink" href="#single-check-ifs" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">this</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">that</span><span class="p">)</span> <span class="ow">or</span> <span class="n">there</span> <span class="ow">and</span> <span class="p">(</span><span class="n">here</span> <span class="ow">or</span> <span class="n">nearby</span><span class="p">):</span>
    <span class="n">blah</span>
</pre></div>


<p>if your are asking too many contions and of different kind, you are doing it 
wrong</p>
<p>NOMBRAR LAS CONDICIONES EN VARIABLES
USAR NOMBRES POSITIVOS no (not is_admin)</p>
<p>def min(x, y):
    if x &lt; y:
        return x
    else:
        return y</p>
<p>should be written as</p>
<p>def min(x, y):
    if x &lt; y:
        return x
    return y</p>
<p>USAR LAZYNESS</p>
<blockquote>
<blockquote>
<blockquote>
<p>from toolz import map  # toolz' map is lazy by default
loud_book = map(str.upper, book)</p>
</blockquote>
</blockquote>
</blockquote>
<p>HABLAR DE por que no usar el inline if/else </p>
<blockquote>
<blockquote>
<blockquote>
<p>a = 'hola' if False else True if False else None
a
a = 'hola' if False else True if False else 'chau'
a
'chau'</p>
</blockquote>
</blockquote>
</blockquote>
<p>http://www.idiotinside.com/2015/10/18/5-methods-to-use-else-block-in-python/</p>
<p>Al no anidar if/else estamos leyendo una tabla de la verdad y compuertas logicas</p>
<p>PARA GUARDAR VALORES BOOLEANOS USAR
x = this or that
x = is not None 
x = something </p>
<p>instead of </p>
<p>if this or that:
   x = true</p>
<p>if something:
    x = True
else:
    x = False</p>
<p>POST SOBRE COUNTING THINGS IN PYTHON
escribir sobre cadena de responsabilidad?
escribir sobre actions: {} y despues actions<a href="">var</a> como reemplazo al switch</p>
<p>Usar all([condicion==condicion2, condicion3==condicion4, etc])</p>
<p>VER GENERATORS WILL FREE YOUR MIND
para usar generadores y asi evirtar for loops y while loops?</p>
<p>https://speakerdeck.com/nb/else-considered-harmful</p>
<p>////////////</p>
<p>Titulo charla: Tenemos que dejar de escribir else por dos anos</p>
<p>En Python hacemos fuerte incapie en que el codigo sea elegante y facil de interpretar,
pero con PEP8 solo no alcanza, muchas veces nuestra logica puede quedar anidada en 
una catarata de if(s) y else(s) dificil de mantener.
En esta charla exploraremos algunas estrategias para evitar esa complejidad inecesaria.</p>
<p>Se llama Hernan Lozano, pero se pone hernantz de nickname,
le gusta la musica en general y el metal en particular, pero no tiene una banda,
es hincha de Talleres, pero nunca va a la cancha,
es avido lector, pero casi siempre termina leyendo el mismo autor,
y por sobre todo, le gusta aprender cosas nuevas, pero despues nunca hace nada con lo que aprendio.</p>
<h6 id="_1"><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h6>
<p>http://code.activestate.com/recipes/577786-smarter-default-arguments/
Currently if you want to avoid any confusion with mutable defaults, you set the default argument to some (immutable) sentinel that indicates the real default argument should be used:</p>
<p>def f(x=None):
    if x is None:
        x = []
There are downsides though:</p>
<p>The default argument no longer reflects the expectation for the argument type.
You can no longer introspect the default argument.
If you want to have the default actually be None, you will have to use some other value for the sentinel. At that point you'll probably then have two different sentinels in use: None and and its surrogate.
The real default must be re-evaluated during each call it is used.
There are two more [seemingly superfluous] lines cluttering up your function body.</p>
<h6 id="_2"><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h6>
<p>La monada de usear [] o [User]
La idea de monadas es tener dos flujos separados para tratar cosas distintas
y si usamos excepciones como una forma de crear un canal alternativo para lo que
pasa en nuestro programa? Las excepciones no son necesariamente algo malo, en python
se pueden usar para crear un canal nuevo de comunicacion.
http://www.holger-peters.de/exceptions-the-dark-side-of-the-force.html
ifs for error handling ^</p>
<p>https://coreos.com/blog/eliminating-journald-delays-part-1.html  -&gt; journald NO usa ifs anidados</p>
<p>A Python Ã†sthetic
https://www.youtube.com/watch?v=x-kB2o8sd5c
http://rhodesmill.org/brandon/slides/2012-11-pyconca/</p>
<p>https://twitter.com/raymondh/status/856663816981041152
http://stackoverflow.com/questions/865741/else-considered-harmful-in-python
http://degoes.net/articles/destroy-all-ifs</p>
<p>Agrupar variables al pricipio de las funciones porque siempre agrupamos cosas que son lo mismo 
variables en un lado, clases en otro archivo, etc. Mezclar todo no es la forma ideal de organizarse.</p>
<p>http://jrsinclair.com/articles/2017/javascript-without-loops/
http://pozorvlak.livejournal.com/94558.html
https://blog.feabhas.com/2017/02/abusing-c-switch-statement-beauty-eye-beholder/
https://youtu.be/D_6ybDcU5gc?t=8m43s
https://www.youtube.com/watch?v=rrBJVMyD-Gs</p>
<p>Django PermissionDenied para custom authentication backend</p>
<div class="highlight"><pre><span></span>def extract_timestamp(self):
    record = self.get_parsed_record()
    timestamp = record.get(&#39;timestamp&#39;)
    if timestamp is None:
        return None
    if isinstance(timestamp, datetime):
        return timestamp
    return dateutil.parser.parse(record[&#39;timestamp&#39;])



def get_parsed_record(self):
    record = self.record
    event_name = self.event_name
    if event_name in (SasEvents.KNOWLEDGE_COMPONENT_MODEL,
                      SasEvents.KCM_UPDATE):
        parsed_record = record
    elif event_name == CeEvents.QUESTION_PART_ATTEMPT:
        require_kcm = &#39;knowledge_component_model&#39; in record
        parsed_record = qpa.parse_question_part_attempt(
            record, require_kcm=require_kcm)
    elif event_name == SasEvents.TUNING_STATUS_CHANGED:
        parsed_record = record
    else:
        parsed_record = record

    return parsed_record
</pre></div>
</article>

      <footer class="column-right light">
        <nav><a href="/">Home</a> - <a href="/archives.html">Archives</a> - <a href="/categories.html">Categories</a> - <a href="/tags.html">Tags</a> - <a href="/rss.xml">RSS</a> - <a href="https://creativecommons.org/licenses/by/4.0/">License</a> | README.txt</nav>
      </footer>
  </main>
</body>
</html>